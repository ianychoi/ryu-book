<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>QoS &mdash; Ryubook 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="top" title="Ryubook 1.0 documentation" href="index.html" />
    <link rel="next" title="OpenFlow 스위치 테스트 도구" href="switch_test_tool.html" />
    <link rel="prev" title="라우터" href="rest_router.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>탐색</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="전체 색인"
             accesskey="I">색인</a></li>
        <li class="right" >
          <a href="switch_test_tool.html" title="OpenFlow 스위치 테스트 도구"
             accesskey="N">다음</a> |</li>
        <li class="right" >
          <a href="rest_router.html" title="라우터"
             accesskey="P">이전</a> |</li>
        <li><a href="index.html">Ryubook 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="qos">
<span id="ch-rest-qos"></span><h1>QoS<a class="headerlink" href="#qos" title="제목 주소">¶</a></h1>
<p>이 장에서는 REST에서 설정이 가능한
QoS 기능의 사용 방법에 대해
설명합니다.</p>
<div class="section" id="id1">
<h2>QoS에 대해<a class="headerlink" href="#id1" title="제목 주소">¶</a></h2>
<p>QoS (Quality of Service)는 네트워크에서 데이터의 종류에 따른 우선 순위에 따라 데이터를 전송하거나
특정 통신을 위한 네트워크 대역폭을 예약하고 일정한 속도로 통신 할 수 있도록 하는 기술입니다.
OpenFlow는 대역폭 제어에 의한 QoS가 가능합니다.</p>
</div>
<div class="section" id="id2">
<h2>플로우 기반 QoS의 동작 예<a class="headerlink" href="#id2" title="제목 주소">¶</a></h2>
<p>다음과 같은 토폴로지를 가정하고 스위치 Queue 설정 및 규칙을 추가하고 적절한 대역폭을 할당하는 예를 소개합니다.
또한 OFS1의 WAN 측 인터페이스에서 트래픽 쉐이핑을 할 경우를 고려하고 있습니다.</p>
<a class="reference internal image-reference" href="_images/fig15.png"><img alt="_images/fig15.png" class="align-center" src="_images/fig15.png" /></a>
<div class="section" id="id3">
<h3>환경 구축<a class="headerlink" href="#id3" title="제목 주소">¶</a></h3>
<p>우선 Mininet에 환경을 구축합니다. <tt class="docutils literal"><span class="pre">mn</span></tt> 명령의 매개 변수는 다음과
같습니다.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="15%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">매개 변수</th>
<th class="head">값</th>
<th class="head">설명</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>mac</td>
<td>없음</td>
<td>자동으로 호스트의 MAC 주소를 설정함</td>
</tr>
<tr class="row-odd"><td>switch</td>
<td>ovsk</td>
<td>Open vSwitch를 사용</td>
</tr>
<tr class="row-even"><td>controller</td>
<td>remote</td>
<td>(별도의) 외부 OpenFlow 컨트롤러 사용</td>
</tr>
<tr class="row-odd"><td>x</td>
<td>없음</td>
<td>xterm을 시작</td>
</tr>
</tbody>
</table>
<p>실행 예는 다음과 같습니다.</p>
<div class="console highlight-python"><div class="highlight"><pre>ryu@ryu-vm:~$ sudo mn --mac --switch ovsk --controller remote -x
*** Creating network
*** Adding controller
Unable to contact the remote controller at 127.0.0.1:6633
*** Adding hosts:
h1 h2
*** Adding switches:
s1
*** Adding links:
(h1, s1) (h2, s1)
*** Configuring hosts
h1 h2
*** Running terms on localhost:10.0
*** Starting controller
*** Starting 1 switches
s1
*** Starting CLI:
mininet&gt;
</pre></div>
</div>
<p>또한 컨트롤러의 xterm을 다시 시작해야합니다.</p>
<div class="console highlight-python"><div class="highlight"><pre>mininet&gt; xterm c0
mininet&gt;
</pre></div>
</div>
<p>다음으로, 스위치에서 사용하는 OpenFlow 버전을 1.3으로 설정합니다.
또한 OVSDB에 액세스를 하기 위해 6632 포트로 수신하도록 설정합니다.</p>
<p>switch: s1 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ovs-vsctl set Bridge s1 protocols=OpenFlow13
root@ryu-vm:~# ovs-vsctl set-manager ptcp:6632
</pre></div>
</div>
<p>이어 「 <a class="reference internal" href="switching_hub.html#ch-switching-hub"><em>스위칭 허브</em></a> 」에서 사용했던 simple_switch_13.py 파일을 수정합니다. rest_qos.py 플로우  테이블의 파이프 라인에서 처리되는 것을 고려하고 있기 때문에 simple_switch_13.py의 플로우 항목을 table id:1에 등록하도록 변경합니다.</p>
<p>controller: c0 (root)</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# sed &#39;/OFPFlowMod(/,/)/s/)/, table_id=1)/&#39; ryu/ryu/app/simple_switch_13.py &gt; ryu/ryu/app/qos_simple_switch_13.py
root@ryu-vm:~# cd ryu/; python ./setup.py install
</pre></div>
</div>
<p>마지막으로, 컨트롤러 xterm에서 rest_qos, qos_simple_switch_13, rest_conf_switch를 시작합니다.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@mininet-vm:~/ryu# ryu-manager ryu.app.rest_qos
ryu.app.qos_simple_switch_13 ryu.app.rest_conf_switch
loading app ryu.app.rest_qos
loading app ryu.app.qos_simple_switch_13
loading app ryu.app.rest_conf_switch
loading app ryu.controller.ofp_handler
loading app ryu.controller.ofp_handler
loading app ryu.controller.ofp_handler
instantiating app None of DPSet
creating context dpset
instantiating app None of ConfSwitchSet
creating context conf_switch
creating context wsgi
instantiating app ryu.app.rest_conf_switch of ConfSwitchAPI
instantiating app ryu.app.qos_simple_switch_13 of SimpleSwitch13
instantiating app ryu.controller.ofp_handler of OFPHandler
instantiating app ryu.app.rest_qos of RestQoSAPI
(3519) wsgi starting up on http://0.0.0.0:8080/
</pre></div>
</div>
<p>Ryu와 스위치 사이에 연결이 성공하면 다음 메시지가 표시됩니다.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>[QoS][INFO] dpid=0000000000000001: Join qos switch.
</pre></div>
</div>
<p>위 로그가 표시되면 준비 완료입니다.</p>
</div>
<div class="section" id="queue">
<h3>Queue 설정<a class="headerlink" href="#queue" title="제목 주소">¶</a></h3>
<p>스위치 Queue를 설정합니다.</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="36%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">큐 ID</th>
<th class="head">최대 속도</th>
<th class="head">최소 속도</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>500Kbps</td>
<td>-</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>(1Mbps)</td>
<td>800Kbps</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">주석</p>
<p class="last">이후의 설명에서 사용하는 REST API의 자세한 내용은 장 끝 부분의 「 <a class="reference internal" href="#rest-api">REST API 목록</a> 」을 참조하십시오.</p>
</div>
<p>우선, OVSDB에 액세스하기 위한 설정을 합니다.</p>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X PUT -d &#39;&quot;tcp:127.0.0.1:6632&quot;&#39; http://localhost:8080/v1.0/conf/switches/0000000000000001/ovsdb_addr
root@ryu-vm:~#
</pre></div>
</div>
<p>다음으로, Queue를 설정합니다.</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X POST -d &#39;{&quot;port_name&quot;: &quot;s1-eth1&quot;, &quot;type&quot;: &quot;linux-htb&quot;, &quot;max_rate&quot;: &quot;1000000&quot;, &quot;queues&quot;: [{&quot;max_rate&quot;: &quot;500000&quot;}, {&quot;min_rate&quot;: &quot;800000&quot;}]}&#39; http://localhost:8080/qos/queue/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: {
        &quot;result&quot;: &quot;success&quot;,
        &quot;details&quot;: {
          &quot;0&quot;: {
            &quot;config&quot;: {
              &quot;max-rate&quot;: &quot;500000&quot;
            }
          },
          &quot;1&quot;: {
            &quot;config&quot;: {
              &quot;min-rate&quot;: &quot;800000&quot;
            }
          }
        }
      }
    }
  ]
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">주석</p>
<p class="last">REST 명령의 실행 결과는 보기 쉽도록 포맷화하였습니다.</p>
</div>
</div>
<div class="section" id="id4">
<h3>QoS 설정<a class="headerlink" href="#id4" title="제목 주소">¶</a></h3>
<p>다음과 같이 스위치에 플로우를 설정합니다.</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="18%" />
<col width="18%" />
<col width="16%" />
<col width="12%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">(우선 순위)</th>
<th class="head">대상</th>
<th class="head">대상 포트</th>
<th class="head">프로토콜</th>
<th class="head">Queue ID</th>
<th class="head">(QoS ID)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>10.0.0.1</td>
<td>5002</td>
<td>UDP</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X POST -d &#39;{&quot;match&quot;: {&quot;nw_dst&quot;: &quot;10.0.0.1&quot;, &quot;nw_proto&quot;: &quot;UDP&quot;, &quot;tp_dst&quot;: &quot;5002&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;1&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;QoS added. : qos_id=1&quot;
        }
      ]
    }
  ]
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h3>설정 내용 확인<a class="headerlink" href="#id5" title="제목 주소">¶</a></h3>
<p>각 스위치에 설정된 내용을 확인합니다.</p>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X GET http://localhost:8080/qos/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;qos&quot;: [
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;nw_proto&quot;: &quot;UDP&quot;,
              &quot;tp_dst&quot;: 5002,
              &quot;qos_id&quot;: 1,
              &quot;nw_dst&quot;: &quot;10.0.0.1&quot;,
              &quot;actions&quot;: [
                {
                  &quot;queue&quot;: &quot;1&quot;
                }
              ]
            }
          ]
        }
      ]
    }
  ]
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h3>대역폭 측정<a class="headerlink" href="#id6" title="제목 주소">¶</a></h3>
<p>이 상태에서 iperf 대역 측정을 해 봅니다.
h1 서버에서는 UDP 프로토콜로 5001 포트와 5002 포트에서 수신 대기합니다. h2는 클라이언트로, h1의 5001 포트에 1Mbps의 UDP 트래픽 및 h1의 5002 포트에 1Mbps의 UDP 트래픽을 전달합니다.</p>
<div class="admonition note">
<p class="first admonition-title">주석</p>
<p class="last">다음 예제에서는 대역 측정에 iperf
(<a class="reference external" href="http://iperf.fr/">http://iperf.fr/</a>)를 사용합니다. iperf 설치 및
사용 방법은 이 글에서는 설명하지 않습니다.</p>
</div>
<p>먼저 h1, h2 터미널을 하나씩 시작합니다.</p>
<div class="console highlight-python"><div class="highlight"><pre>mininet&gt; xterm h1
mininet&gt; xterm h2
</pre></div>
</div>
<p>Node: h1(1) (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# iperf -s -u -i 1 -p 5001
...
</pre></div>
</div>
<p>Node: h1(2) (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# iperf -s -u -i 1 -p 5002
...
</pre></div>
</div>
<p>Node: h2(1) (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# iperf -c 10.0.0.1 -p 5001 -u -b 1M
...
</pre></div>
</div>
<p>Node: h2(2) (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# iperf -c 10.0.0.1 -p 5002 -u -b 1M
...
</pre></div>
</div>
<p>Node: h1(1) (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>[  4] local 10.0.0.1 port 5001 connected with 10.0.0.2 port 50375
[ ID] Interval       Transfer     Bandwidth        Jitter   Lost/Total Datagrams
[  4]  0.0- 1.0 sec  60.3 KBytes   494 Kbits/sec  12.208 ms    4/   42 (9.5%)
[  4]  0.0- 1.0 sec  4 datagrams received out-of-order
[  4]  1.0- 2.0 sec  58.9 KBytes   482 Kbits/sec  12.538 ms    0/   41 (0%)
[  4]  2.0- 3.0 sec  58.9 KBytes   482 Kbits/sec  12.494 ms    0/   41 (0%)
[  4]  3.0- 4.0 sec  58.9 KBytes   482 Kbits/sec  12.625 ms    0/   41 (0%)
[  4]  4.0- 5.0 sec  58.9 KBytes   482 Kbits/sec  12.576 ms    0/   41 (0%)
[  4]  5.0- 6.0 sec  58.9 KBytes   482 Kbits/sec  12.561 ms    0/   41 (0%)
[  4]  6.0- 7.0 sec  11.5 KBytes  94.1 Kbits/sec  45.536 ms    0/    8 (0%)
[  4]  7.0- 8.0 sec  4.31 KBytes  35.3 Kbits/sec  92.790 ms    0/    3 (0%)
[  4]  8.0- 9.0 sec  4.31 KBytes  35.3 Kbits/sec  135.391 ms    0/    3 (0%)
[  4]  9.0-10.0 sec  4.31 KBytes  35.3 Kbits/sec  167.045 ms    0/    3 (0%)
[  4] 10.0-11.0 sec  4.31 KBytes  35.3 Kbits/sec  193.006 ms    0/    3 (0%)
[  4] 11.0-12.0 sec  4.31 KBytes  35.3 Kbits/sec  213.944 ms    0/    3 (0%)
[  4] 12.0-13.0 sec  4.31 KBytes  35.3 Kbits/sec  231.981 ms    0/    3 (0%)
[  4] 13.0-14.0 sec  4.31 KBytes  35.3 Kbits/sec  249.758 ms    0/    3 (0%)
[  4] 14.0-15.0 sec  4.31 KBytes  35.3 Kbits/sec  261.139 ms    0/    3 (0%)
[  4] 15.0-16.0 sec  4.31 KBytes  35.3 Kbits/sec  269.879 ms    0/    3 (0%)
[  4] 16.0-17.0 sec  12.9 KBytes   106 Kbits/sec  204.755 ms    0/    9 (0%)
[  4] 17.0-18.0 sec  58.9 KBytes   482 Kbits/sec  26.214 ms    0/   41 (0%)
[  4] 18.0-19.0 sec  58.9 KBytes   482 Kbits/sec  13.485 ms    0/   41 (0%)
[  4] 19.0-20.0 sec  58.9 KBytes   482 Kbits/sec  12.690 ms    0/   41 (0%)
[  4] 20.0-21.0 sec  58.9 KBytes   482 Kbits/sec  12.498 ms    0/   41 (0%)
[  4] 21.0-22.0 sec  58.9 KBytes   482 Kbits/sec  12.601 ms    0/   41 (0%)
[  4] 22.0-23.0 sec  60.3 KBytes   494 Kbits/sec  12.640 ms    0/   42 (0%)
[  4] 23.0-24.0 sec  58.9 KBytes   482 Kbits/sec  12.508 ms    0/   41 (0%)
[  4] 24.0-25.0 sec  58.9 KBytes   482 Kbits/sec  12.578 ms    0/   41 (0%)
[  4] 25.0-26.0 sec  58.9 KBytes   482 Kbits/sec  12.541 ms    0/   41 (0%)
[  4] 26.0-27.0 sec  58.9 KBytes   482 Kbits/sec  12.539 ms    0/   41 (0%)
[  4] 27.0-28.0 sec  58.9 KBytes   482 Kbits/sec  12.578 ms    0/   41 (0%)
[  4] 28.0-29.0 sec  58.9 KBytes   482 Kbits/sec  12.527 ms    0/   41 (0%)
[  4] 29.0-30.0 sec  58.9 KBytes   482 Kbits/sec  12.542 ms    0/   41 (0%)
[  4]  0.0-30.6 sec  1.19 MBytes   327 Kbits/sec  12.562 ms    4/  852 (0.47%)
[  4]  0.0-30.6 sec  4 datagrams received out-of-order
</pre></div>
</div>
<p>Node: h1(2) (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>[  4] local 10.0.0.1 port 5002 connected with 10.0.0.2 port 60868
[ ID] Interval       Transfer     Bandwidth        Jitter   Lost/Total Datagrams
[  4]  0.0- 1.0 sec   112 KBytes   917 Kbits/sec   4.288 ms    0/   78 (0%)
[  4]  1.0- 2.0 sec   115 KBytes   941 Kbits/sec   4.168 ms    0/   80 (0%)
[  4]  2.0- 3.0 sec   115 KBytes   941 Kbits/sec   4.454 ms    0/   80 (0%)
[  4]  3.0- 4.0 sec   113 KBytes   929 Kbits/sec   4.226 ms    0/   79 (0%)
[  4]  4.0- 5.0 sec   113 KBytes   929 Kbits/sec   4.096 ms    0/   79 (0%)
[  4]  5.0- 6.0 sec   113 KBytes   929 Kbits/sec   4.225 ms    0/   79 (0%)
[  4]  6.0- 7.0 sec   113 KBytes   929 Kbits/sec   4.055 ms    0/   79 (0%)
[  4]  7.0- 8.0 sec   113 KBytes   929 Kbits/sec   4.241 ms    0/   79 (0%)
[  4]  8.0- 9.0 sec   115 KBytes   941 Kbits/sec   3.886 ms    0/   80 (0%)
[  4]  9.0-10.0 sec   112 KBytes   917 Kbits/sec   3.969 ms    0/   78 (0%)
[  4]  0.0-10.8 sec  1.19 MBytes   931 Kbits/sec   4.287 ms    0/  852 (0%)
</pre></div>
</div>
<p>결과에서 보는 바와 같이, 5001번 포트로 향하는 트래픽은 대역폭 제한으로 인해 500Kbps 이하로 형성되고, 5002번 포트로 향하는 트래픽은
800kbps의 대역폭 보장이 이루어짐을 알 수 있습니다.</p>
</div>
</div>
<div class="section" id="diffserv-qos">
<h2>DiffServ의 QoS의 동작 예제<a class="headerlink" href="#diffserv-qos" title="제목 주소">¶</a></h2>
<p>앞의 예제에서는 플로우마다 QoS를 생성하여 상세한 제어가 가능한 반면,
처리하는 플로우가 많아질수록 대역폭을 제어하는 스위치에 플로우가 증가하여 확장성이 없습니다.
해당 플로우에 QoS를 처리하는 대신, DiffServ 도메인의 입구 라우터에서
플로우를 여러 클래스로 나누어 각 클래스마다 제어를 하는 DiffServ를 적용합니다.
DiffServ는 IP 헤더의 ToS 필드에 6 비트 DSCP 값을 사용하여 DSCP 값에 의해 정의되는 PHB에 따라 전송하도록
QoS를 제공합니다.</p>
<p>다음과 같은 토폴로지를 가정하고 스위치 (라우터) OFS1에 Queue 및 클래스에 대한 대역폭 제어를 설정하고, 라우터 OFS2는 플로우에 따라 DSCP 값을 표시하도록 규칙을 적용하는 예제를 소개합니다.
또한, OFS1의 WAN 쪽 인터페이스에서 트래픽 쉐이핑을 사용하는 경우를 가정합니다.</p>
<a class="reference internal image-reference" href="_images/fig23.png"><img alt="_images/fig23.png" class="align-center" src="_images/fig23.png" /></a>
<div class="section" id="id7">
<h3>환경 구축<a class="headerlink" href="#id7" title="제목 주소">¶</a></h3>
<p>우선 Mininet에 환경을 구축합니다. <tt class="docutils literal"><span class="pre">mn</span></tt> 명령의 매개 변수는 다음과 같습니다.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="15%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">매개 변수</th>
<th class="head">값</th>
<th class="head">설명</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>topo</td>
<td>linear,2</td>
<td>2개의 스위치가 일렬로 연결된 토폴로지</td>
</tr>
<tr class="row-odd"><td>mac</td>
<td>없음</td>
<td>자동으로 호스트의 MAC 주소를 설정</td>
</tr>
<tr class="row-even"><td>switch</td>
<td>ovsk</td>
<td>Open vSwitch를 사용</td>
</tr>
<tr class="row-odd"><td>controller</td>
<td>remote</td>
<td>외부 OpenFlow 컨트롤러 이용</td>
</tr>
<tr class="row-even"><td>x</td>
<td>없음</td>
<td>xterm을 시작</td>
</tr>
</tbody>
</table>
<p>실행 예는 다음과 같습니다.</p>
<div class="console highlight-python"><div class="highlight"><pre>ryu@ryu-vm:~$ sudo mn --topo linear,2 --mac --switch ovsk --controller remote -x
*** Creating network
*** Adding controller
Unable to contact the remote controller at 127.0.0.1:6633
*** Adding hosts:
h1 h2
*** Adding switches:
s1
*** Adding links:
(h1, s1) (h2, s1)
*** Configuring hosts
h1 h2
*** Running terms on localhost:10.0
*** Starting controller
*** Starting 1 switches
s1
*** Starting CLI:
mininet&gt;
</pre></div>
</div>
<p>또한, 컨트롤러의 xterm도 시작합니다.</p>
<div class="console highlight-python"><div class="highlight"><pre>mininet&gt; xterm c0
mininet&gt;
</pre></div>
</div>
<p>이어 스위치에서 사용하는 OpenFlow 버전을 1.3으로 설정합니다.
또한 OVSDB에 액세스하기 위해 6632 포트로 수신하도록 설정합니다.</p>
<p>switch: s1 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ovs-vsctl set Bridge s1 protocols=OpenFlow13
root@ryu-vm:~# ovs-vsctl set-manager ptcp:6632
</pre></div>
</div>
<p>switch: s2 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ovs-vsctl set Bridge s2 protocols=OpenFlow13
</pre></div>
</div>
<p>그 다음, 각 호스트에서 자동으로 할당된 IP 주소를 삭제하고 새로운 IP 주소를
설정합니다.</p>
<p>host: h1:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ip addr del 10.0.0.1/8 dev h1-eth0
root@ryu-vm:~# ip addr add 172.16.20.10/24 dev h1-eth0
</pre></div>
</div>
<p>host: h2:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ip addr del 10.0.0.2/8 dev h2-eth0
root@ryu-vm:~# ip addr add 172.16.10.10/24 dev h2-eth0
</pre></div>
</div>
<p>계속해서, 「 <a class="reference internal" href="rest_router.html#ch-rest-router"><em>라우터</em></a> 」 에서 사용한 rest_router.py를 수정합니다. rest_qos.py에서는 플로우 테이블의 파이프라인에서 처리된다고 가정하고 있기에, rest_router.py의 플로우 항목을 table id:1에 등록하도록 변경합니다.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# sed &#39;/OFPFlowMod(/,/)/s/0, cmd/1, cmd/&#39; ryu/ryu/app/rest_router.py &gt; ryu/ryu/app/qos_rest_router.py
root@ryu-vm:~# cd ryu/; python ./setup.py install
</pre></div>
</div>
<p>마지막으로, 컨트롤러 xterm에서 rest_qos, qos_rest_router, rest_conf_switch을 시작합니다.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@mininet-vm:~/ryu# ryu-manager ryu.app.rest_qos ryu.app.qos_rest_router ryu.app.rest_conf_switch
loading app ryu.app.rest_qos
loading app ryu.app.qos_rest_router
loading app ryu.app.rest_conf_switch
loading app ryu.controller.ofp_handler
loading app ryu.controller.ofp_handler
loading app ryu.controller.ofp_handler
loading app ryu.controller.ofp_handler
instantiating app None of DPSet
creating context dpset
instantiating app None of ConfSwitchSet
creating context conf_switch
creating context wsgi
instantiating app ryu.app.rest_conf_switch of ConfSwitchAPI
instantiating app ryu.app.qos_rest_router of RestRouterAPI
instantiating app ryu.controller.ofp_handler of OFPHandler
instantiating app ryu.app.rest_qos of RestQoSAPI
(4687) wsgi starting up on http://0.0.0.0:8080/
</pre></div>
</div>
<p>Ryu와 스위치 간의 연결에 성공하면 다음 메시지가 표시됩니다.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>[RT][INFO] switch_id=0000000000000002: Set SW config for TTL error packet in.
[RT][INFO] switch_id=0000000000000002: Set ARP handling (packet in) flow [cookie=0x0]
[RT][INFO] switch_id=0000000000000002: Set L2 switching (normal) flow [cookie=0x0]
[RT][INFO] switch_id=0000000000000002: Set default route (drop) flow [cookie=0x0]
[RT][INFO] switch_id=0000000000000002: Start cyclic routing table update.
[RT][INFO] switch_id=0000000000000002: Join as router.
[QoS][INFO] dpid=0000000000000002: Join qos switch.
[RT][INFO] switch_id=0000000000000001: Set SW config for TTL error packet in.
[RT][INFO] switch_id=0000000000000001: Set ARP handling (packet in) flow [cookie=0x0]
[RT][INFO] switch_id=0000000000000001: Set L2 switching (normal) flow [cookie=0x0]
[RT][INFO] switch_id=0000000000000001: Set default route (drop) flow [cookie=0x0]
[RT][INFO] switch_id=0000000000000001: Start cyclic routing table update.
[RT][INFO] switch_id=0000000000000001: Join as router.
[QoS][INFO] dpid=0000000000000001: Join qos switch.
</pre></div>
</div>
<p>위 로그가 표시되면 준비가 완료된 것입니다.</p>
</div>
<div class="section" id="id8">
<h3>Queue 설정<a class="headerlink" href="#id8" title="제목 주소">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="27%" />
<col width="27%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">큐 ID</th>
<th class="head">최대 속도</th>
<th class="head">최소 속도</th>
<th class="head">클래스</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>1Mbps</td>
<td>-</td>
<td>Default</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>(1Mbps)</td>
<td>200Kbps</td>
<td>AF3</td>
</tr>
<tr class="row-even"><td>2</td>
<td>(1Mbps)</td>
<td>500Kbps</td>
<td>AF4</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">주석</p>
<p class="last">이후의 설명에서 사용하는 REST API의 자세한 내용은 장 끝부분의 「 <a class="reference internal" href="#rest-api">REST API 목록</a> 」을 참조하십시오.</p>
</div>
<p>우선, OVSDB에 액세스하기위한 설정을 합니다.</p>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X PUT -d &#39;&quot;tcp:127.0.0.1:6632&quot;&#39; http://localhost:8080/v1.0/conf/switches/0000000000000001/ovsdb_addr
root@ryu-vm:~#
</pre></div>
</div>
<p>이어, Queue를 설정합니다.</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X POST -d &#39;{&quot;port_name&quot;: &quot;s1-eth1&quot;, &quot;type&quot;: &quot;linux-htb&quot;, &quot;max_rate&quot;: &quot;1000000&quot;, &quot;queues&quot;:[{&quot;max_rate&quot;: &quot;1000000&quot;}, {&quot;min_rate&quot;: &quot;200000&quot;}, {&quot;min_rate&quot;: &quot;500000&quot;}]}&#39; http://localhost:8080/qos/queue/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: {
        &quot;result&quot;: &quot;success&quot;,
        &quot;details&quot;: {
          &quot;0&quot;: {
            &quot;config&quot;: {
              &quot;max-rate&quot;: &quot;1000000&quot;
            }
          },
          &quot;1&quot;: {
            &quot;config&quot;: {
              &quot;min-rate&quot;: &quot;200000&quot;
            }
          },
          &quot;2&quot;: {
            &quot;config&quot;: {
              &quot;min-rate&quot;: &quot;500000&quot;
            }
          }
        }
      }
    }
  ]
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">주석</p>
<p class="last">REST 명령의 실행 결과는 보기 쉽도록 포맷화하였습니다.</p>
</div>
</div>
<div class="section" id="id9">
<h3>라우터 설정<a class="headerlink" href="#id9" title="제목 주소">¶</a></h3>
<p>각 라우터에 주소, 기본 경로를 설정합니다.</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X POST -d &#39;{&quot;address&quot;: &quot;172.16.20.1/24&quot;}&#39; http://localhost:8080/router/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;Add address [address_id=1]&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;address&quot;: &quot;172.16.30.10/24&quot;}&#39; http://localhost:8080/router/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;Add address [address_id=2]&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;gateway&quot;: &quot;172.16.30.1&quot;}&#39; http://localhost:8080/router/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;Add route [route_id=1]&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;address&quot;: &quot;172.16.10.1/24&quot;}&#39; http://localhost:8080/router/0000000000000002
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000002&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;Add address [address_id=1]&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;address&quot;: &quot;172.16.30.1/24&quot;}&#39; http://localhost:8080/router/0000000000000002
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000002&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;Add address [address_id=2]&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;gateway&quot;: &quot;172.16.30.10&quot;}&#39; http://localhost:8080/router/0000000000000002
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000002&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;Add route [route_id=1]&quot;
        }
      ]
    }
  ]
...
</pre></div>
</div>
<p>라우터에 IP 주소를 구성할 수 있으므로 각 호스트에 기본 게이트웨이를
등록합니다.</p>
<p>host: h1:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ip route add default via 172.16.20.1
</pre></div>
</div>
<p>host: h2:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ip route add default via 172.16.10.1
</pre></div>
</div>
</div>
<div class="section" id="id10">
<h3>QoS 설정<a class="headerlink" href="#id10" title="제목 주소">¶</a></h3>
<p>다음 라우터 (s1)에 DSCP 값에 따른 제어 플로우를 설정합니다.</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="26%" />
<col width="26%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">(우선 순위)</th>
<th class="head">DSCP</th>
<th class="head">대기열 ID</th>
<th class="head">(QoS ID)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>26(AF31)</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>34(AF41)</td>
<td>2</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;26&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;1&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;QoS added. : qos_id=1&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;34&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;2&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;QoS added. : qos_id=2&quot;
        }
      ]
    }
  ]
</pre></div>
</div>
<p>다음 라우터 (s2)에 마킹하는 플로우를 설정합니다.</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="18%" />
<col width="18%" />
<col width="17%" />
<col width="12%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">(우선 순위)</th>
<th class="head">대상</th>
<th class="head">대상 포트</th>
<th class="head">프로토콜</th>
<th class="head">DSCP</th>
<th class="head">(QoS ID)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>172.16.20.10</td>
<td>5002</td>
<td>UDP</td>
<td>26(AF31)</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>172.16.20.10</td>
<td>5003</td>
<td>UDP</td>
<td>34(AF41)</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X POST -d &#39;{&quot;match&quot;: {&quot;nw_dst&quot;: &quot;172.16.20.10&quot;, &quot;nw_proto&quot;: &quot;UDP&quot;, &quot;tp_dst&quot;: &quot;5002&quot;}, &quot;actions&quot;:{&quot;mark&quot;: &quot;26&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000002
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000002&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;QoS added. : qos_id=1&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;match&quot;: {&quot;nw_dst&quot;: &quot;172.16.20.10&quot;, &quot;nw_proto&quot;: &quot;UDP&quot;, &quot;tp_dst&quot;: &quot;5003&quot;}, &quot;actions&quot;:{&quot;mark&quot;: &quot;34&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000002
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000002&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;QoS added. : qos_id=2&quot;
        }
      ]
    }
  ]
</pre></div>
</div>
</div>
<div class="section" id="id11">
<h3>설정 내용 확인<a class="headerlink" href="#id11" title="제목 주소">¶</a></h3>
<p>각 스위치에 설정된 내용을 확인합니다.</p>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X GET http://localhost:8080/qos/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;qos&quot;: [
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;ip_dscp&quot;: 34,
              &quot;actions&quot;: [
                {
                  &quot;queue&quot;: &quot;2&quot;
                }
              ],
              &quot;qos_id&quot;: 2
            },
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;ip_dscp&quot;: 26,
              &quot;actions&quot;: [
                {
                  &quot;queue&quot;: &quot;1&quot;
                }
              ],
              &quot;qos_id&quot;: 1
            }
          ]
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X GET http://localhost:8080/qos/rules/0000000000000002
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000002&quot;,
      &quot;command_result&quot;: [
        {
          &quot;qos&quot;: [
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;nw_proto&quot;: &quot;UDP&quot;,
              &quot;tp_dst&quot;: 5002,
              &quot;qos_id&quot;: 1,
              &quot;nw_dst&quot;: &quot;172.16.20.10&quot;,
              &quot;actions&quot;: [
                {
                  &quot;mark&quot;: &quot;26&quot;
                }
              ]
            },
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;nw_proto&quot;: &quot;UDP&quot;,
              &quot;tp_dst&quot;: 5003,
              &quot;qos_id&quot;: 2,
              &quot;nw_dst&quot;: &quot;172.16.20.10&quot;,
              &quot;actions&quot;: [
                {
                  &quot;mark&quot;: &quot;34&quot;
                }
              ]
            }
          ]
        }
      ]
    }
  ]
</pre></div>
</div>
</div>
<div class="section" id="id12">
<h3>대역폭 측정<a class="headerlink" href="#id12" title="제목 주소">¶</a></h3>
<p>이 상태에서 iperf 대역 측정을 합니다.
h1 서버에서는 UDP 프로토콜로 포트 번호 5001, 5002, 5003에서 수신 대기합니다. h2 클라이언트에서는 h1 5001 포트로 1Mbps의 UDP 트래픽을, h1 5002 포트로 300Kbps UDP 트래픽을, 그리고 h1 5003 포트로 600Kbps UDP 트래픽을 전송합니다.</p>
<p>먼저, h2 터미널을 시작합니다.</p>
<div class="console highlight-python"><div class="highlight"><pre>mininet&gt; xterm h2
mininet&gt; xterm h2
</pre></div>
</div>
<p>Node: h1(1) (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# iperf -s -u -p 5002 &amp;
...
root@ryu-vm:~# iperf -s -u -p 5003 &amp;
...
root@ryu-vm:~# iperf -s -u -i 1 5001
------------------------------------------------------------
Server listening on UDP port 5001
Receiving 1470 byte datagrams
UDP buffer size:  208 KByte (default)
------------------------------------------------------------
</pre></div>
</div>
<p>Node: h2(1) (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# iperf -c 172.16.20.10 -p 5001 -u -b 1M
...
</pre></div>
</div>
<p>Node: h2(2) (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# iperf -c 172.16.20.10 -p 5002 -u -b 300K
------------------------------------------------------------
Client connecting to 172.16.20.10, UDP port 5002
Sending 1470 byte datagrams
UDP buffer size:  208 KByte (default)
------------------------------------------------------------
[  4] local 172.16.10.10 port 44077 connected with 172.16.20.10 port 5002
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-10.1 sec   369 KBytes   300 Kbits/sec
[  4] Sent 257 datagrams
[  4] Server Report:
[  4]  0.0-10.2 sec   369 KBytes   295 Kbits/sec  17.379 ms    0/  257 (0%)
</pre></div>
</div>
<p>Node: h2(3) (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# iperf -c 172.16.20.10 -p 5003 -u -b 600K
------------------------------------------------------------
Client connecting to 172.16.20.10, UDP port 5003
Sending 1470 byte datagrams
UDP buffer size:  208 KByte (default)
------------------------------------------------------------
[  4] local 172.16.10.10 port 59280 connected with 172.16.20.10 port 5003
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-10.0 sec   735 KBytes   600 Kbits/sec
[  4] Sent 512 datagrams
[  4] Server Report:
[  4]  0.0-10.0 sec   735 KBytes   600 Kbits/sec   5.401 ms    0/  512 (0%)
</pre></div>
</div>
<p>Node: h1(1) (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>[  4] local 172.16.20.10 port 5001 connected with 172.16.10.10 port 37329
[ ID] Interval       Transfer     Bandwidth        Jitter   Lost/Total Datagrams
[  4]  0.0- 1.0 sec   119 KBytes   976 Kbits/sec   0.639 ms    0/   83 (0%)
[  4]  1.0- 2.0 sec   118 KBytes   964 Kbits/sec   0.680 ms    0/   82 (0%)
[  4]  2.0- 3.0 sec  87.6 KBytes   717 Kbits/sec   5.817 ms    0/   61 (0%)
[  4]  3.0- 4.0 sec  81.8 KBytes   670 Kbits/sec   5.700 ms    0/   57 (0%)
[  4]  4.0- 5.0 sec  66.0 KBytes   541 Kbits/sec  12.772 ms    0/   46 (0%)
[  4]  5.0- 6.0 sec  8.61 KBytes  70.6 Kbits/sec  60.590 ms    0/    6 (0%)
[  4]  6.0- 7.0 sec  8.61 KBytes  70.6 Kbits/sec  89.968 ms    0/    6 (0%)
[  4]  7.0- 8.0 sec  8.61 KBytes  70.6 Kbits/sec  108.364 ms    0/    6 (0%)
[  4]  8.0- 9.0 sec  10.0 KBytes  82.3 Kbits/sec  125.635 ms    0/    7 (0%)
[  4]  9.0-10.0 sec  8.61 KBytes  70.6 Kbits/sec  130.604 ms    0/    6 (0%)
[  4] 10.0-11.0 sec  8.61 KBytes  70.6 Kbits/sec  140.192 ms    0/    6 (0%)
[  4] 11.0-12.0 sec  8.61 KBytes  70.6 Kbits/sec  144.411 ms    0/    6 (0%)
[  4] 12.0-13.0 sec  28.7 KBytes   235 Kbits/sec  63.964 ms    0/   20 (0%)
[  4] 13.0-14.0 sec  44.5 KBytes   365 Kbits/sec  26.721 ms    0/   31 (0%)
[  4] 14.0-15.0 sec  57.4 KBytes   470 Kbits/sec   9.396 ms    0/   40 (0%)
[  4] 15.0-16.0 sec   118 KBytes   964 Kbits/sec   0.956 ms    0/   82 (0%)
[  4] 16.0-17.0 sec   119 KBytes   976 Kbits/sec   0.820 ms    0/   83 (0%)
[  4] 17.0-18.0 sec   118 KBytes   964 Kbits/sec   0.741 ms    0/   82 (0%)
[  4] 18.0-19.0 sec   118 KBytes   964 Kbits/sec   0.839 ms    0/   82 (0%)
[  4]  0.0-19.7 sec  1.19 MBytes   508 Kbits/sec   0.981 ms    0/  852 (0%)
</pre></div>
</div>
<p>AF41로 마킹된 트래픽은 500Kbps의 대역폭이 보장되고, AF31로 마킹된 트래픽은 200Kbps의 대역폭이 보장됩니다. 한편, Best-effort 트래픽은 AF에 표시되는 트래픽이 흐르는 동안 대역폭이 감소함을 알 수 있습니다. 이와 같이 DiffServ 의해 QoS가 제공되는지 확인할 수 있었습니다.</p>
</div>
</div>
<div class="section" id="meter-table-qos">
<h2>Meter Table을 사용한 QoS의 동작 예<a class="headerlink" href="#meter-table-qos" title="제목 주소">¶</a></h2>
<p>OpenFlow 1.3에서 Meter Table이 도입되어, OpenFlow에서 트래픽 폴리싱이 가능해졌습니다. 여기서는 Meter Table 사용 예를 소개합니다.
이 예제에서는 Meter Table을 지원하는 OpenFlow Switch인 ofsoftswitch13(<a class="reference external" href="https://github.com/CPqD/ofsoftswitch13">https://github.com/CPqD/ofsoftswitch13</a>)을 사용합니다.</p>
<div class="admonition note">
<p class="first admonition-title">주석</p>
<p class="last">ofsoftswitch13의 설치 절차 등에 대해서는 여기서 다루지 않습니다.
참고:
(<a class="reference external" href="https://github.com/CPqD/ofsoftswitch13/wiki/OpenFlow-1.3-Tutorial">https://github.com/CPqD/ofsoftswitch13/wiki/OpenFlow-1.3-Tutorial</a>)</p>
</div>
<p>다음과 같이 여러 DiffServ 도메인 (DS 도메인)으로 구성된 네트워크를 가정합니다.
DS 도메인의 경계에 위치하는 라우터 (에지 라우터)에 의해 계량이 이루어 지정된 대역폭을 초과하는 트래픽은 다시 표시됩니다.
보통, 다시 마킹된 패킷은 우선적으로 삭제 되거나 우선 순위가 낮은 클래스로 처리됩니다.
예를 들어, AF1 클래스에 800Kbps의 대역폭을 보증하고 각 DS 도메인에서 유입되는 AF11 트래픽을 400Kbps로 대역폭을 지정하면, 그 이상은 초과 트래픽으로 패킷 AF12에 다시 표시됩니다.
그러나 이 때, AF12은 Best-effort 트래픽으로 보장되도록 설정합니다.</p>
<a class="reference internal image-reference" href="_images/fig33.png"><img alt="_images/fig33.png" class="align-center" src="_images/fig33.png" /></a>
<div class="section" id="id13">
<h3>환경 구축<a class="headerlink" href="#id13" title="제목 주소">¶</a></h3>
<p>우선 Mininet으로 환경을 구축합니다.
Python 스크립트로 토폴로지를 생성합니다.</p>
<p>소스 이름： <tt class="docutils literal"><span class="pre">qos_sample_topology.py</span></tt></p>
<div class="sourcecode highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">mininet.net</span> <span class="kn">import</span> <span class="n">Mininet</span>
<span class="kn">from</span> <span class="nn">mininet.cli</span> <span class="kn">import</span> <span class="n">CLI</span>
<span class="kn">from</span> <span class="nn">mininet.topo</span> <span class="kn">import</span> <span class="n">Topo</span>
<span class="kn">from</span> <span class="nn">mininet.node</span> <span class="kn">import</span> <span class="n">UserSwitch</span>
<span class="kn">from</span> <span class="nn">mininet.node</span> <span class="kn">import</span> <span class="n">RemoteController</span>

<span class="k">class</span> <span class="nc">SliceableSwitch</span><span class="p">(</span><span class="n">UserSwitch</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">UserSwitch</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyTopo</span><span class="p">(</span><span class="n">Topo</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="s">&quot;Create custom topo.&quot;</span>
        <span class="c"># Initialize topology</span>
        <span class="n">Topo</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span>
        <span class="c"># Add hosts and switches</span>
        <span class="n">host01</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addHost</span><span class="p">(</span><span class="s">&#39;h1&#39;</span><span class="p">)</span>
        <span class="n">host02</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addHost</span><span class="p">(</span><span class="s">&#39;h2&#39;</span><span class="p">)</span>
        <span class="n">host03</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addHost</span><span class="p">(</span><span class="s">&#39;h3&#39;</span><span class="p">)</span>
        <span class="n">switch01</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addSwitch</span><span class="p">(</span><span class="s">&#39;s1&#39;</span><span class="p">)</span>
        <span class="n">switch02</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addSwitch</span><span class="p">(</span><span class="s">&#39;s2&#39;</span><span class="p">)</span>
        <span class="n">switch03</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addSwitch</span><span class="p">(</span><span class="s">&#39;s3&#39;</span><span class="p">)</span>
        <span class="c"># Add links</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLink</span><span class="p">(</span><span class="n">host01</span><span class="p">,</span> <span class="n">switch01</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLink</span><span class="p">(</span><span class="n">host02</span><span class="p">,</span> <span class="n">switch02</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLink</span><span class="p">(</span><span class="n">host03</span><span class="p">,</span> <span class="n">switch03</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLink</span><span class="p">(</span><span class="n">switch01</span><span class="p">,</span> <span class="n">switch02</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLink</span><span class="p">(</span><span class="n">switch01</span><span class="p">,</span> <span class="n">switch03</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">net</span><span class="p">):</span>
    <span class="n">s1</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">getNodeByName</span><span class="p">(</span><span class="s">&#39;s1&#39;</span><span class="p">)</span>
    <span class="n">s1</span><span class="o">.</span><span class="n">cmdPrint</span><span class="p">(</span><span class="s">&#39;dpctl unix:/tmp/s1 queue-mod 1 1 80&#39;</span><span class="p">)</span>
    <span class="n">s1</span><span class="o">.</span><span class="n">cmdPrint</span><span class="p">(</span><span class="s">&#39;dpctl unix:/tmp/s1 queue-mod 1 2 120&#39;</span><span class="p">)</span>
    <span class="n">s1</span><span class="o">.</span><span class="n">cmdPrint</span><span class="p">(</span><span class="s">&#39;dpctl unix:/tmp/s1 queue-mod 1 3 800&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">genericTest</span><span class="p">(</span><span class="n">topo</span><span class="p">):</span>
    <span class="n">net</span> <span class="o">=</span> <span class="n">Mininet</span><span class="p">(</span><span class="n">topo</span><span class="o">=</span><span class="n">topo</span><span class="p">,</span> <span class="n">switch</span><span class="o">=</span><span class="n">SliceableSwitch</span><span class="p">,</span>
        <span class="n">controller</span><span class="o">=</span><span class="n">RemoteController</span><span class="p">)</span>
    <span class="n">net</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">run</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
    <span class="n">CLI</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
    <span class="n">net</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">topo</span> <span class="o">=</span> <span class="n">MyTopo</span><span class="p">()</span>
    <span class="n">genericTest</span><span class="p">(</span><span class="n">topo</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">주석</p>
<p>미리 ofsoftswitch13 링크 속도를 1Mbps로 변경합니다.</p>
<p>먼저, ofsoftswitch13의 소스 코드를 수정합니다.</p>
<div class="console highlight-python"><div class="highlight"><pre>$ cd ofsoftswitch13
$ gedit lib/netdev.c
</pre></div>
</div>
<p>lib/netdev.c:</p>
<div class="sourcecode highlight-python"><div class="highlight"><pre>644           if (ecmd.autoneg) {
645               netdev-&gt;curr |= OFPPF_AUTONEG;
646           }
647
648 -         netdev-&gt;speed = ecmd.speed;
649 +         netdev-&gt;speed = 1;  /* Fix to 1Mbps link */
650
651       } else {
652           VLOG_DBG(LOG_MODULE, &quot;ioctl(SIOCETHTOOL) failed: %s&quot;, strerror(errno));
653       }
</pre></div>
</div>
<p>그리고 ofsoftswitch13를 다시 설치합니다.</p>
<div class="console last highlight-python"><div class="highlight"><pre>$ make clean
$ ./boot.sh
$ ./configure
$ make
$ sudo make install
</pre></div>
</div>
</div>
<p>실행 예는 다음과 같습니다.</p>
<div class="console highlight-python"><div class="highlight"><pre>mininet@mininet-vm:~$ sudo python qos_sample_topology.py
Unable to contact the remote controller at 127.0.0.1:6633
mininet&gt;
</pre></div>
</div>
<p>또한 컨트롤로의 xterm을 실행해야 합니다.</p>
<div class="console highlight-python"><div class="highlight"><pre>mininet&gt; xterm c0
mininet&gt; xterm c0
mininet&gt;
</pre></div>
</div>
<p>이어, 「 <a class="reference internal" href="switching_hub.html#ch-switching-hub"><em>스위칭 허브</em></a> 」에서 사용했던 simple_switch_13.py을 변경합니다. rest_qos.py에서는 플로우 테이블의 파이프라인에서 처리된다고 가정하기에, simple_switch_13.py의 플로우 항목을 table id:1에 등록하도록 변경합니다.</p>
<p>controller: c0 (root)</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# sed &#39;/OFPFlowMod(/,/)/s/)/, table_id=1)/&#39; ryu/ryu/app/simple_switch_13.py &gt; ryu/ryu/app/qos_simple_switch_13.py
root@ryu-vm:~# cd ryu/; python ./setup.py install
</pre></div>
</div>
<p>마지막으로, 컨트롤러 xterm에서 rest_qos, qos_simple_switch_13을 시작합니다.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@mininet-vm:~/ryu# ryu-manager ryu.app.rest_qos ryu.app.qos_simple_switch_13
loading app ryu.app.rest_qos
loading app ryu.app.qos_simple_switch_13
loading app ryu.controller.ofp_handler
loading app ryu.controller.ofp_handler
loading app ryu.controller.ofp_handler
instantiating app None of DPSet
creating context dpset
instantiating app None of ConfSwitchSet
creating context conf_switch
creating context wsgi
instantiating app ryu.app.qos_simple_switch_13 of SimpleSwitch13
instantiating app ryu.controller.ofp_handler of OFPHandler
instantiating app ryu.app.rest_qos of RestQoSAPI
(2348) wsgi starting up on http://0.0.0.0:8080/
</pre></div>
</div>
<p>Ryu와 스위치와의 연결에 성공하면 다음 메시지가 표시됩니다.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>[QoS][INFO] dpid=0000000000000003: Join qos switch.
[QoS][INFO] dpid=0000000000000001: Join qos switch.
[QoS][INFO] dpid=0000000000000002: Join qos switch.
...
</pre></div>
</div>
</div>
<div class="section" id="id14">
<h3>QoS 설정<a class="headerlink" href="#id14" title="제목 주소">¶</a></h3>
<p>다음과 같이 스위치 (s1)에 DSCP 값에 따라 제어 플로우를 설정합니다.</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="26%" />
<col width="26%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">(우선 순위)</th>
<th class="head">DSCP</th>
<th class="head">큐 ID</th>
<th class="head">(QoS ID)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>0 (BE)</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>12(AF12)</td>
<td>2</td>
<td>2</td>
</tr>
<tr class="row-even"><td>1</td>
<td>10(AF11)</td>
<td>3</td>
<td>3</td>
</tr>
</tbody>
</table>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;0&quot;, &quot;in_port&quot;: &quot;2&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;1&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;QoS added. : qos_id=1&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;10&quot;, &quot;in_port&quot;: &quot;2&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;3&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;QoS added. : qos_id=2&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;12&quot;, &quot;in_port&quot;: &quot;2&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;2&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;QoS added. : qos_id=3&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;0&quot;, &quot;in_port&quot;: &quot;3&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;1&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;QoS added. : qos_id=4&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;10&quot;, &quot;in_port&quot;: &quot;3&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;3&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;QoS added. : qos_id=5&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;12&quot;, &quot;in_port&quot;: &quot;3&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;2&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;QoS added. : qos_id=6&quot;
        }
      ]
    }
  ]
</pre></div>
</div>
<p>다음과 같이 스위치 (s2, s3)에 미터 항목을 설정합니다.</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="26%" />
<col width="26%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">(우선 순위)</th>
<th class="head">DSCP</th>
<th class="head">미터 ID</th>
<th class="head">(QoS ID)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>10(AF11)</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="21%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">미터 ID</th>
<th class="head">Flags</th>
<th class="head">Bands</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>KBPS</td>
<td>type:DSCP_REMARK,
rate:400000,
prec_level:1</td>
</tr>
</tbody>
</table>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;10&quot;}, &quot;actions&quot;:{&quot;meter&quot;: &quot;1&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000002
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000002&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;QoS added. : qos_id=1&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;meter_id&quot;: &quot;1&quot;, &quot;flags&quot;: &quot;KBPS&quot;, &quot;bands&quot;:[{&quot;type&quot;:&quot;DSCP_REMARK&quot;, &quot;rate&quot;: &quot;400&quot;, &quot;prec_level&quot;: &quot;1&quot;}]}&#39; http://localhost:8080/qos/meter/0000000000000002
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000002&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;Meter added. : Meter ID=1&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;10&quot;}, &quot;actions&quot;:{&quot;meter&quot;: &quot;1&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000003
[
  {
    &quot;switch_id&quot;: &quot;0000000000000003&quot;,
    &quot;command_result&quot;: [
      {
        &quot;result&quot;: &quot;success&quot;,
        &quot;details&quot;: &quot;QoS added. : qos_id=1&quot;
      }
    ]
  }
]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;meter_id&quot;: &quot;1&quot;, &quot;flags&quot;: &quot;KBPS&quot;, &quot;bands&quot;:[{&quot;type&quot;:&quot;DSCP_REMARK&quot;, &quot;rate&quot;: &quot;400&quot;, &quot;prec_level&quot;: &quot;1&quot;}]}&#39; http://localhost:8080/qos/meter/0000000000000003
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000003&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;Meter added. : Meter ID=1&quot;
        }
      ]
    }
  ]
</pre></div>
</div>
</div>
<div class="section" id="id15">
<h3>설정 내용 확인<a class="headerlink" href="#id15" title="제목 주소">¶</a></h3>
<p>각 스위치에 설정된 내용을 확인합니다.</p>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X GET http://localhost:8080/qos/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;qos&quot;: [
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;actions&quot;: [
                {
                  &quot;queue&quot;: &quot;1&quot;
                }
              ],
              &quot;in_port&quot;: 2,
              &quot;qos_id&quot;: 1
            },
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;actions&quot;: [
                {
                  &quot;queue&quot;: &quot;3&quot;
                }
              ],
              &quot;qos_id&quot;: 2,
              &quot;in_port&quot;: 2,
              &quot;ip_dscp&quot;: 10
            },
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;actions&quot;: [
                {
                  &quot;queue&quot;: &quot;2&quot;
                }
              ],
              &quot;qos_id&quot;: 3,
              &quot;in_port&quot;: 2,
              &quot;ip_dscp&quot;: 12
            },
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;actions&quot;: [
                {
                  &quot;queue&quot;: &quot;1&quot;
                }
              ],
              &quot;in_port&quot;: 3,
              &quot;qos_id&quot;: 4
            },
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;actions&quot;: [
                {
                  &quot;queue&quot;: &quot;3&quot;
                }
              ],
              &quot;qos_id&quot;: 5,
              &quot;in_port&quot;: 3,
              &quot;ip_dscp&quot;: 10
            },
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;actions&quot;: [
                {
                  &quot;queue&quot;: &quot;2&quot;
                }
              ],
              &quot;qos_id&quot;: 6,
              &quot;in_port&quot;: 3,
              &quot;ip_dscp&quot;: 12
            }
          ]
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X GET http://localhost:8080/qos/rules/0000000000000002
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000002&quot;,
      &quot;command_result&quot;: [
        {
          &quot;qos&quot;: [
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;ip_dscp&quot;: 10,
              &quot;actions&quot;: [
                {
                  &quot;meter&quot;: &quot;1&quot;
                }
              ],
              &quot;qos_id&quot;: 1
            }
          ]
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X GET http://localhost:8080/qos/rules/0000000000000003
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000003&quot;,
      &quot;command_result&quot;: [
        {
          &quot;qos&quot;: [
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;ip_dscp&quot;: 10,
              &quot;actions&quot;: [
                {
                  &quot;meter&quot;: &quot;1&quot;
                }
              ],
              &quot;qos_id&quot;: 1
            }
          ]
        }
      ]
    }
  ]
</pre></div>
</div>
</div>
<div class="section" id="id16">
<h3>대역폭 측정<a class="headerlink" href="#id16" title="제목 주소">¶</a></h3>
<p>이 상태에서 iperf로 대역폭 측정을 해 봅니다.
h1 서버에서는 UDP 프로토콜에 해당하는 포트 번호 5001, 5002, 5003에서 수신 대기합니다.
h2, h3는 클라이언트로, h1에 각각 지정된 유형의 트래픽을 보냅니다.</p>
<p>우선, h1과 h2에 2개, h3에 1개씩 터미널을 시작합니다.</p>
<div class="console highlight-python"><div class="highlight"><pre>mininet&gt; xterm h1
mininet&gt; xterm h2
mininet&gt; xterm h3
mininet&gt; xterm h3
...
</pre></div>
</div>
<p>Node: h1(1) (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# iperf -s -u -p 5001 &amp;
root@ryu-vm:~# iperf -s -u -p 5002 &amp;
root@ryu-vm:~# iperf -s -u -p 5003 &amp;
...
</pre></div>
</div>
<div class="section" id="best-effort-af11">
<h4>Best-effort 및 AF11 트래픽 초과량 발생<a class="headerlink" href="#best-effort-af11" title="제목 주소">¶</a></h4>
<p>Node: h2 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# iperf -c 10.0.0.1 -p 5001 -u -b 800K
------------------------------------------------------------
Client connecting to 10.0.0.1, UDP port 5001
Sending 1470 byte datagrams
UDP buffer size:  208 KByte (default)
------------------------------------------------------------
[  4] local 10.0.0.3 port 60324 connected with 10.0.0.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-10.0 sec   979 KBytes   800 Kbits/sec
[  4] Sent 682 datagrams
[  4] Server Report:
[  4]  0.0-11.9 sec   650 KBytes   449 Kbits/sec  18.458 ms  229/  682 (34%)
</pre></div>
</div>
<p>Node: h3(1) (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# iperf -c 10.0.0.1 -p 5002 -u -b 600K --tos 0x28
------------------------------------------------------------
Client connecting to 10.0.0.1, UDP port 5002
Sending 1470 byte datagrams
UDP buffer size:  208 KByte (default)
------------------------------------------------------------
[  4] local 10.0.0.2 port 53661 connected with 10.0.0.1 port 5002
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-10.0 sec   735 KBytes   600 Kbits/sec
[  4] Sent 512 datagrams
[  4] Server Report:
[  4]  0.0-10.0 sec   735 KBytes   600 Kbits/sec   7.497 ms    6/  512 (1.2%)
[  4]  0.0-10.0 sec  6 datagrams received out-of-order
</pre></div>
</div>
<p>AF11 트래픽이 계약 대역폭인 400Kbps를 초과하는 경우에도 Best-effort 트래픽보다
대역폭이 보장되어 있는 것을 확인할 수 있습니다.</p>
</div>
<div class="section" id="af11-best-effort-af11">
<h4>AF11 초과 트래픽과 Best-effort와 AF11 계약 대역 내 트래픽<a class="headerlink" href="#af11-best-effort-af11" title="제목 주소">¶</a></h4>
<p>Node: h2 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# iperf -c 10.0.0.1 -p 5001 -u -b 600K --tos 0x28
------------------------------------------------------------
Client connecting to 10.0.0.1, UDP port 5001
Sending 1470 byte datagrams
UDP buffer size:  208 KByte (default)
------------------------------------------------------------
[  4] local 10.0.0.2 port 42758 connected with 10.0.0.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-10.0 sec   735 KBytes   600 Kbits/sec
[  4] Sent 512 datagrams
[  4] Server Report:
[  4]  0.0-10.0 sec   666 KBytes   544 Kbits/sec  500.361 ms   48/  512 (9.4%)
[  4]  0.0-10.0 sec  192 datagrams received out-of-order
</pre></div>
</div>
<p>Node: h3(1) (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# iperf -c 10.0.0.1 -p 5002 -u -b 500K
------------------------------------------------------------
Client connecting to 10.0.0.1, UDP port 5002
Sending 1470 byte datagrams
UDP buffer size:  208 KByte (default)
------------------------------------------------------------
[  4] local 10.0.0.3 port 42759 connected with 10.0.0.1 port 5002
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-10.0 sec   613 KBytes   500 Kbits/sec
[  4] Sent 427 datagrams
[  4] WARNING: did not receive ack of last datagram after 10 tries.
[  4] Server Report:
[  4]  0.0-14.0 sec   359 KBytes   210 Kbits/sec  102.479 ms  177/  427 (41%)
</pre></div>
</div>
<p>Node: h3(2) (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# iperf -c 10.0.0.1 -p 5003 -u -b 400K --tos 0x28
------------------------------------------------------------
Client connecting to 10.0.0.1, UDP port 5003
Sending 1470 byte datagrams
UDP buffer size:  208 KByte (default)
------------------------------------------------------------
[  4] local 10.0.0.3 port 35475 connected with 10.0.0.1 port 5003
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-10.1 sec   491 KBytes   400 Kbits/sec
[  4] Sent 342 datagrams
[  4] Server Report:
[  4]  0.0-10.5 sec   491 KBytes   384 Kbits/sec  15.422 ms    0/  342 (0%)
</pre></div>
</div>
<p>400Kbps의 계약 내역에 해당하는 트래픽은 드롭되지 않는 것을 알 수 있습니다.</p>
</div>
<div class="section" id="af11-af11">
<h4>AF11 초과 트래픽과 AF11 초과 트래픽<a class="headerlink" href="#af11-af11" title="제목 주소">¶</a></h4>
<p>Node: h2 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# iperf -c 10.0.0.1 -p 5001 -u -b 600K --tos 0x28
------------------------------------------------------------
Client connecting to 10.0.0.1, UDP port 5001
Sending 1470 byte datagrams
UDP buffer size:  208 KByte (default)
------------------------------------------------------------
[  4] local 10.0.0.3 port 50761 connected with 10.0.0.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-10.0 sec   735 KBytes   600 Kbits/sec
[  4] Sent 512 datagrams
[  4] Server Report:
[  4]  0.0-11.0 sec   673 KBytes   501 Kbits/sec  964.490 ms   43/  512 (8.4%)
[  4]  0.0-11.0 sec  95 datagrams received out-of-order
</pre></div>
</div>
<p>Node: h3(1) (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# iperf -c 10.0.0.1 -p 5002 -u -b 600K --tos 0x28
------------------------------------------------------------
Client connecting to 10.0.0.1, UDP port 5002
Sending 1470 byte datagrams
UDP buffer size:  208 KByte (default)
------------------------------------------------------------
[  4] local 10.0.0.2 port 53066 connected with 10.0.0.1 port 5002
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-10.0 sec   735 KBytes   600 Kbits/sec
[  4] Sent 512 datagrams
[  4] Server Report:
[  4]  0.0-10.6 sec   665 KBytes   515 Kbits/sec  897.126 ms   49/  512 (9.6%)
[  4]  0.0-10.6 sec  93 datagrams received out-of-order
</pre></div>
</div>
<p>초과 트래픽은 동일한 수준으로 드롭되어있는 것을 알 수 있습니다.</p>
<p>이 장에서는 구체적인 예를 들면서 QoS REST API의 사용 방법을 설명했습니다.</p>
</div>
</div>
</div>
<div class="section" id="rest-api">
<h2>REST API 목록<a class="headerlink" href="#rest-api" title="제목 주소">¶</a></h2>
<p>이 장에서 소개했던 reqt_qos의 REST API 목록입니다.</p>
<div class="section" id="id17">
<h3>큐 상태 얻기<a class="headerlink" href="#id17" title="제목 주소">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>메서드</strong></td>
<td>GET</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/qos/queue/status/{<strong>switch</strong>}</p>
<p class="last">&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>스위치ID</em> ]</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id18">
<h3>큐 설정 정보 얻기<a class="headerlink" href="#id18" title="제목 주소">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>메서드</strong></td>
<td>GET</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/qos/queue/{<strong>switch</strong>}</p>
<p class="last">&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>스위치ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>참고</strong></td>
<td>QoS REST API를 시작한 이후 활성화된 큐의 설정 정보만 얻을 수 있습니다.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id19">
<h3>큐 설정<a class="headerlink" href="#id19" title="제목 주소">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>메서드</strong></td>
<td>POST</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/qos/queue/{<strong>switch</strong>}</p>
<p class="last">&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>스위치ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>데이터</strong></td>
<td><p class="first"><strong>port_name</strong>:[구성된 포트 이름]</p>
<p><strong>type</strong>:[linux-htb | linux-hfsc]</p>
<p><strong>max_rate</strong>:[대역폭(bps)]</p>
<p><strong>queues</strong>:</p>
<blockquote class="last">
<div><p><strong>max_rate</strong>:[대역폭(bps)]</p>
<p><strong>min_rate</strong>:[대역폭(bps)]</p>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><strong>참고</strong></td>
<td><p class="first">기존 설정이 있는 경우 덮어씁니다.</p>
<p>OpenvSwitch에서만 설정이 가능합니다.</p>
<p>port_name 매개 변수는 옵션이니다.</p>
<p class="last">port_name을 지정하지 않으면 모든 포트에 설정됩니다.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id20">
<h3>큐 삭제<a class="headerlink" href="#id20" title="제목 주소">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>메서드</strong></td>
<td>DELETE</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/qos/queue/{<strong>swtich</strong>}</p>
<p class="last">&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>스위치ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>참고</strong></td>
<td>OVSDB의 QoS 레코드와의 관계를 제거합니다.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id21">
<h3>전체 QoS 규칙 얻기<a class="headerlink" href="#id21" title="제목 주소">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>메서드</strong></td>
<td>GET</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/qos/rules/{<strong>switch</strong>}[/{<strong>vlan</strong>}]</p>
<p>&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>스위치ID</em> ]</p>
<p class="last">&#8211;<strong>vlan</strong>: [ &#8220;all&#8221; | <em>VLAN ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>참고</strong></td>
<td>VLAN ID 지정은 옵션입니다.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id22">
<h3>QoS 규칙 추가<a class="headerlink" href="#id22" title="제목 주소">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>메서드</strong></td>
<td>POST</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/qos/rules/{<strong>switch</strong>}[/{<strong>vlan</strong>}]</p>
<p>&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>스위치ID</em> ]</p>
<p class="last">&#8211;<strong>vlan</strong>: [ &#8220;all&#8221; | <em>VLAN ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>데이터</strong></td>
<td><p class="first"><strong>priority</strong>:[ 0 - 65535 ]</p>
<p><strong>match</strong>:</p>
<blockquote>
<div><p><strong>in_port</strong>:[ 0 - 65535 ]</p>
<p><strong>dl_src</strong>:&#8221;&lt;xx:xx:xx:xx:xx:xx&gt;&#8221;</p>
<p><strong>dl_dst</strong>:&#8221;&lt;xx:xx:xx:xx:xx:xx&gt;&#8221;</p>
<p><strong>dl_type</strong>:[ &#8220;ARP&#8221; | &#8220;IPv4&#8221; ]</p>
<p><strong>nw_src</strong>:&#8221;&lt;xxx.xxx.xxx.xxx/xx&gt;&#8221;</p>
<p><strong>nw_dst</strong>:&#8221;&lt;xxx.xxx.xxx.xxx/xx&#8221;&gt;</p>
<p><strong>nw_proto</strong>&#8221;:[ &#8220;TCP&#8221; | &#8220;UDP&#8221; | &#8220;ICMP&#8221; ]</p>
<p><strong>tp_src</strong>:[ 0 - 65535 ]</p>
<p><strong>tp_dst</strong>:[ 0 - 65535 ]</p>
<p><strong>ip_dscp</strong>:[ 0 - 63 ]</p>
</div></blockquote>
<p><strong>actions</strong>:</p>
<blockquote class="last">
<div>[ &#8220;mark&#8221;: [ 0 - 63  ] ] |
[ &#8220;meter&#8221;: [ 미터 ID ] ] |
[ &#8220;queue&#8221;: [ 큐 ID ] ]</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><strong>참고</strong></td>
<td><p class="first">등록에 성공하면 QoS ID가 생성되어 응답에 포함됩니다.</p>
<p class="last">VLAN ID 지정은 옵션입니다.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id23">
<h3>QoS 규칙 삭제<a class="headerlink" href="#id23" title="제목 주소">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>메서드</strong></td>
<td>DELETE</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/qos/rules/{<strong>switch</strong>}[/{<strong>vlan</strong>}]</p>
<p>&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>스위치ID</em> ]</p>
<p class="last">&#8211;<strong>vlan</strong>: [ &#8220;all&#8221; | <em>VLAN ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>데이터</strong></td>
<td><strong>rule_id</strong>:[ &#8220;all&#8221; | 1 - ... ]</td>
</tr>
<tr class="row-even"><td><strong>참고</strong></td>
<td>VLAN ID 지정은 옵션입니다.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id24">
<h3>미터 테이블 정보 얻기<a class="headerlink" href="#id24" title="제목 주소">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>메서드</strong></td>
<td>GET</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/qos/meter/{<strong>switch</strong>}</p>
<p class="last">&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>스위치ID</em> ]</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id25">
<h3>미터 테이블 설정<a class="headerlink" href="#id25" title="제목 주소">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>메서드</strong></td>
<td>POST</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td>/qos/meter/{<strong>switch</strong>}</td>
</tr>
<tr class="row-odd"><td><strong>데이터</strong></td>
<td><p class="first"><strong>meter_id</strong>:미터 ID</p>
<p><strong>bands</strong>:</p>
<blockquote class="last">
<div><p><strong>action</strong>:[DROP | DSCP_REMARK]</p>
<p><strong>flags</strong>:[KBPS | PKTPS | BURST | STATS]</p>
<p><strong>burst_size</strong>:[버스트 크기]</p>
<p><strong>rate</strong>:[수신 빈도]</p>
<p><strong>prec_level</strong>:[재마킹하는 드롭 우선 순위 레벨]</p>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><strong>참고</strong></td>
<td>bands에 지정 및 적용하는 매개 변수는 action과 flags에 따라 달라집니다.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">목차</a></h3>
  <ul>
<li><a class="reference internal" href="#">QoS</a><ul>
<li><a class="reference internal" href="#id1">QoS에 대해</a></li>
<li><a class="reference internal" href="#id2">플로우 기반 QoS의 동작 예</a><ul>
<li><a class="reference internal" href="#id3">환경 구축</a></li>
<li><a class="reference internal" href="#queue">Queue 설정</a></li>
<li><a class="reference internal" href="#id4">QoS 설정</a></li>
<li><a class="reference internal" href="#id5">설정 내용 확인</a></li>
<li><a class="reference internal" href="#id6">대역폭 측정</a></li>
</ul>
</li>
<li><a class="reference internal" href="#diffserv-qos">DiffServ의 QoS의 동작 예제</a><ul>
<li><a class="reference internal" href="#id7">환경 구축</a></li>
<li><a class="reference internal" href="#id8">Queue 설정</a></li>
<li><a class="reference internal" href="#id9">라우터 설정</a></li>
<li><a class="reference internal" href="#id10">QoS 설정</a></li>
<li><a class="reference internal" href="#id11">설정 내용 확인</a></li>
<li><a class="reference internal" href="#id12">대역폭 측정</a></li>
</ul>
</li>
<li><a class="reference internal" href="#meter-table-qos">Meter Table을 사용한 QoS의 동작 예</a><ul>
<li><a class="reference internal" href="#id13">환경 구축</a></li>
<li><a class="reference internal" href="#id14">QoS 설정</a></li>
<li><a class="reference internal" href="#id15">설정 내용 확인</a></li>
<li><a class="reference internal" href="#id16">대역폭 측정</a><ul>
<li><a class="reference internal" href="#best-effort-af11">Best-effort 및 AF11 트래픽 초과량 발생</a></li>
<li><a class="reference internal" href="#af11-best-effort-af11">AF11 초과 트래픽과 Best-effort와 AF11 계약 대역 내 트래픽</a></li>
<li><a class="reference internal" href="#af11-af11">AF11 초과 트래픽과 AF11 초과 트래픽</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#rest-api">REST API 목록</a><ul>
<li><a class="reference internal" href="#id17">큐 상태 얻기</a></li>
<li><a class="reference internal" href="#id18">큐 설정 정보 얻기</a></li>
<li><a class="reference internal" href="#id19">큐 설정</a></li>
<li><a class="reference internal" href="#id20">큐 삭제</a></li>
<li><a class="reference internal" href="#id21">전체 QoS 규칙 얻기</a></li>
<li><a class="reference internal" href="#id22">QoS 규칙 추가</a></li>
<li><a class="reference internal" href="#id23">QoS 규칙 삭제</a></li>
<li><a class="reference internal" href="#id24">미터 테이블 정보 얻기</a></li>
<li><a class="reference internal" href="#id25">미터 테이블 설정</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>이전 항목</h4>
  <p class="topless"><a href="rest_router.html"
                        title="이전 장">라우터</a></p>
  <h4>다음 항목</h4>
  <p class="topless"><a href="switch_test_tool.html"
                        title="다음 장">OpenFlow 스위치 테스트 도구</a></p>
  <h3>현재 문서</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/rest_qos.txt"
           rel="nofollow">소스 코드를 보려면</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>빠른 검색</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="바로 가기" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    모듈, 클래스 또는 함수 이름을 입력하십시오.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>탐색</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="전체 색인"
             >색인</a></li>
        <li class="right" >
          <a href="switch_test_tool.html" title="OpenFlow 스위치 테스트 도구"
             >다음</a> |</li>
        <li class="right" >
          <a href="rest_router.html" title="라우터"
             >이전</a> |</li>
        <li><a href="index.html">Ryubook 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, RYU project team.
    </div>
  </body>
</html>